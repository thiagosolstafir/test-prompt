"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},5216:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>b,originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>w,routeModule:()=>E,serverHooks:()=>T,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>P});var a={};r.r(a),r.d(a,{POST:()=>p});var n=r(5419),i=r(9108),o=r(9678),s=r(8070);let l=require("sqlite3");var u=r.n(l);r(538);var m=r(661);async function c(e){let t=new m.v(e);return await t.open(),t}var f=r(1017);let d=r.n(f)().join(process.cwd(),"contacts.db");async function h(){let e=await c({filename:d,driver:u().Database});return await e.exec(`
    CREATE TABLE IF NOT EXISTS contacts (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      email TEXT NOT NULL,
      message TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )
  `),e}async function p(e){try{let{name:t,email:r,message:a}=await e.json();if(!t||!r||!a)return s.Z.json({error:"Missing required fields"},{status:400});try{let e=await h();return await e.run("INSERT INTO contacts (name, email, message) VALUES (?, ?, ?)",[t,r,a]),await e.close(),s.Z.json({message:"Contact saved successfully"})}catch(e){return console.error("Database error:",e),s.Z.json({error:"Database operation failed",details:e.message},{status:500})}}catch(e){return console.error("Request error:",e),s.Z.json({error:"Invalid request"},{status:400})}}let E=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"/Applications/XAMPP/xamppfiles/htdocs/test-prompt/src/app/api/contact/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:w,staticGenerationAsyncStorage:g,serverHooks:T,headerHooks:b,staticGenerationBailout:P}=E,q="/api/contact/route";function v(){return(0,o.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:g})}},661:(e,t,r)=>{t.v=void 0;let a=r(538),n=r(4135),i=r(1428),o=r(1340);class s{constructor(e){this.config=e,this.db=null}on(e,t){this.db.on(e,t)}getDatabaseInstance(){return this.db}open(){return new Promise((e,t)=>{let{filename:r,mode:a,driver:n}=this.config;if(null==r)throw Error("sqlite: filename cannot be null / undefined");if(!n)throw Error("sqlite: driver is not defined");a?this.db=new n(r,a,r=>{if(r)return t((0,o.formatError)(r));e()}):this.db=new n(r,r=>{if(r)return t((0,o.formatError)(r));e()})})}close(){return new Promise((e,t)=>{this.db.close(r=>{if(r)return t((0,o.formatError)(r));e()})})}configure(e,t){this.db.configure(e,t)}run(e,...t){return new Promise((r,n)=>{let s=(0,i.toSqlParams)(e,t);this.db.run(s.sql,...s.params,function(e){if(e)return n((0,o.formatError)(e));r({stmt:new a.Statement(this.stmt),lastID:this.lastID,changes:this.changes})})})}get(e,...t){return new Promise((r,a)=>{let n=(0,i.toSqlParams)(e,t);this.db.get(n.sql,...n.params,(e,t)=>{if(e)return a((0,o.formatError)(e));r(t)})})}each(e,...t){return new Promise((r,a)=>{let n=t.pop();if(!n||"function"!=typeof n)throw Error("sqlite: Last param of Database#each() must be a callback function");if(t.length>0){let e=t.pop();if("function"==typeof e)throw Error("sqlite: Database#each() should only have a single callback defined. See readme for usage.");t.push(e)}let s=(0,i.toSqlParams)(e,t);this.db.each(s.sql,...s.params,(e,t)=>{if(e)return n((0,o.formatError)(e),null);n(null,t)},(e,t)=>{if(e)return a((0,o.formatError)(e));r(t)})})}all(e,...t){return new Promise((r,a)=>{let n=(0,i.toSqlParams)(e,t);this.db.all(n.sql,...n.params,(e,t)=>{if(e)return a((0,o.formatError)(e));r(t)})})}exec(e){return new Promise((t,r)=>{let a=(0,i.toSqlParams)(e);this.db.exec(a.sql,e=>{if(e)return r((0,o.formatError)(e));t()})})}prepare(e,...t){return new Promise((r,n)=>{let o=(0,i.toSqlParams)(e,t),s=this.db.prepare(o.sql,...o.params,e=>{if(e)return n(e);r(new a.Statement(s))})})}loadExtension(e){return new Promise((t,r)=>{this.db.loadExtension(e,e=>{if(e)return r((0,o.formatError)(e));t()})})}async migrate(e){await (0,n.migrate)(this,e)}serialize(){throw Error("sqlite: Currently not implemented. Use getDatabaseInstance().serialize() instead.")}parallelize(){throw Error("sqlite: Currently not implemented. Use getDatabaseInstance().parallelize() instead.")}}t.v=s},538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Statement=void 0;let a=r(1340);class n{constructor(e){this.stmt=e}getStatementInstance(){return this.stmt}bind(...e){return new Promise((t,r)=>{this.stmt.bind(...e,e=>{if(e)return r((0,a.formatError)(e));t()})})}reset(){return new Promise(e=>{this.stmt.reset(()=>{e()})})}finalize(){return new Promise((e,t)=>{this.stmt.finalize(r=>{if(r)return t((0,a.formatError)(r));e()})})}run(...e){return new Promise((t,r)=>{let n=this;this.stmt.run(...e,function(e){if(e)return r((0,a.formatError)(e));t({stmt:n,lastID:this.lastID,changes:this.changes})})})}get(...e){return new Promise((t,r)=>{this.stmt.get(...e,(e,n)=>{if(e)return r((0,a.formatError)(e));t(n)})})}all(...e){return new Promise((t,r)=>{this.stmt.all(...e,(e,n)=>{if(e)return r((0,a.formatError)(e));t(n)})})}each(...e){return new Promise((t,r)=>{let n=e.pop();if(!n||"function"!=typeof n)throw Error("sqlite: Last param of Statement#each() must be a callback function");if(e.length>0){let t=e.pop();if("function"==typeof t)throw Error("sqlite: Statement#each() should only have a single callback defined. See readme for usage.");e.push(t)}this.stmt.each(...e,(e,t)=>{if(e)return n((0,a.formatError)(e),null);n(null,t)},(e,n)=>{if(e)return r((0,a.formatError)(e));t(n)})})}}t.Statement=n},1340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatError=void 0,t.formatError=function(e){if(e instanceof Error)return e;if("object"==typeof e){let t=Error();for(let r in e)t[r]=e[r];return e.message&&(t.message=e.message),t}return Error(e)}},4135:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.migrate=t.readMigrations=void 0;let a=r(7147),n=r(1017);async function i(e){let t=e||n.join(process.cwd(),"migrations"),r=n.resolve(t),i=await new Promise((e,t)=>{a.readdir(r,(r,a)=>{if(r)return t(r);e(a.map(e=>e.match(/^(\d+).(.*?)\.sql$/)).filter(e=>null!==e).map(e=>({id:Number(e[1]),name:e[2],filename:e[0]})).sort((e,t)=>Math.sign(e.id-t.id)))})});if(!i.length)throw Error(`No migration files found in '${r}'.`);return Promise.all(i.map(e=>new Promise((t,i)=>{let o=n.join(r,e.filename);a.readFile(o,"utf-8",(r,a)=>{if(r)return i(r);let[n,o]=a.split(/^--\s+?down\b/im);e.up=n.replace(/^-- .*?$/gm,"").trim(),e.down=o?o.trim():"",t(e)})})))}async function o(e,t={}){t.force=t.force||!1,t.table=t.table||"migrations";let{force:r,table:a}=t,n=t.migrations?t.migrations:await i(t.migrationsPath);await e.run(`CREATE TABLE IF NOT EXISTS "${a}" (
  id   INTEGER PRIMARY KEY,
  name TEXT    NOT NULL,
  up   TEXT    NOT NULL,
  down TEXT    NOT NULL
)`);let o=await e.all(`SELECT id, name, up, down FROM "${a}" ORDER BY id ASC`),s=n[n.length-1];for(let t of o.slice().sort((e,t)=>Math.sign(t.id-e.id)))if(!n.some(e=>e.id===t.id)||r&&t.id===s.id){await e.run("BEGIN");try{await e.exec(t.down),await e.run(`DELETE FROM "${a}" WHERE id = ?`,t.id),await e.run("COMMIT"),o=o.filter(e=>e.id!==t.id)}catch(t){throw await e.run("ROLLBACK"),t}}else break;let l=o.length?o[o.length-1].id:0;for(let t of n)if(t.id>l){await e.run("BEGIN");try{await e.exec(t.up),await e.run(`INSERT INTO "${a}" (id, name, up, down) VALUES (?, ?, ?, ?)`,t.id,t.name,t.up,t.down),await e.run("COMMIT")}catch(t){throw await e.run("ROLLBACK"),t}}}t.readMigrations=i,t.migrate=o},1428:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toSqlParams=void 0,t.toSqlParams=function(e,t=[]){return"string"==typeof e?{sql:e,params:t}:{sql:e.sql,params:e.values}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206],()=>r(5216));module.exports=a})();