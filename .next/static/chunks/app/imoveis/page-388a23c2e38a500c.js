(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{258:function(e,a,s){Promise.resolve().then(s.bind(s,6787))},6787:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var t=s(7437),l=s(2265),r=s(6691),i=s.n(r),n=s(4033),o=s(1038),c=s(5042),d=e=>{var a,s;let{isOpen:r,onClose:n,propertyId:d}=e,[m,h]=(0,l.useState)(null),[g,x]=(0,l.useState)(!1),[u,p]=(0,l.useState)(0),[v,j]=(0,l.useState)("");(0,l.useEffect)(()=>{r&&d?b(d):(h(null),p(0))},[r,d]);let b=async e=>{try{x(!0),j("");let a=await fetch("/api/imoveis/".concat(e));if(!a.ok)throw Error("Falha ao carregar detalhes do im\xf3vel");let s=await a.json();h(s)}catch(e){j("Erro ao carregar detalhes do im\xf3vel"),console.error(e)}finally{x(!1)}},f=(e,a)=>a?"https://adminmediaplus1.websiteseguro.com/projetos/telinveste/uploads/galeriaimovel_imagem/".concat(e,"/").concat(a):"/images/placeholder-house.jpg";return(0,t.jsx)(o.u,{appear:!0,show:r,as:l.Fragment,children:(0,t.jsxs)(c.Vq,{as:"div",className:"relative z-50",onClose:n,children:[(0,t.jsx)(o.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75"})}),(0,t.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,t.jsx)(o.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,t.jsx)(c.Vq.Panel,{className:"w-full max-w-6xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:n,className:"absolute right-4 top-4 z-10 rounded-full bg-white/80 p-2 text-gray-600 hover:bg-white hover:text-gray-900",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),g?(0,t.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-indigo-500"})}):v?(0,t.jsx)("div",{className:"flex h-96 items-center justify-center text-red-600",children:v}):m?(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,t.jsxs)("div",{className:"relative lg:w-2/3",children:[(0,t.jsx)("div",{className:"relative h-96 lg:h-[600px]",children:(null===(a=m.galeria)||void 0===a?void 0:a.length)>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{src:f(m.idimovel,m.galeria[u].imagem),alt:"".concat(m.titulo," - Imagem ").concat(u+1),fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 66vw"}),(0,t.jsx)("button",{onClick:()=>{(null==m?void 0:m.galeria)&&p(e=>0===e?m.galeria.length-1:e-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/80 p-2 hover:bg-white",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsx)("button",{onClick:()=>{(null==m?void 0:m.galeria)&&p(e=>e===m.galeria.length-1?0:e+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/80 p-2 hover:bg-white",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 rounded-full bg-black/50 px-3 py-1 text-sm text-white",children:[u+1," / ",m.galeria.length]})]}):(0,t.jsx)(i(),{src:"/images/placeholder-house.jpg",alt:m.titulo,fill:!0,className:"object-cover"})}),(null===(s=m.galeria)||void 0===s?void 0:s.length)>1&&(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto bg-gray-100 p-4",children:m.galeria.map((e,a)=>(0,t.jsx)("button",{onClick:()=>p(a),className:"relative h-20 w-20 flex-shrink-0 ".concat(u===a?"ring-2 ring-indigo-500":""),children:(0,t.jsx)(i(),{src:f(m.idimovel,e.imagem),alt:"Thumbnail ".concat(a+1),fill:!0,className:"object-cover",sizes:"80px"})},a))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 lg:w-1/3",children:[(0,t.jsx)(c.Vq.Title,{as:"h3",className:"mb-2 text-2xl font-bold text-gray-900",children:m.titulo}),(0,t.jsxs)("p",{className:"mb-2 text-lg font-medium text-indigo-600",children:["R$ ",m.preco.toLocaleString("pt-BR"),2===m.transacao_idtransacao?"/m\xeas":""]}),(0,t.jsx)("p",{className:"text-gray-500",children:m.endereco}),(0,t.jsxs)("div",{className:"my-6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"\xc1rea"}),(0,t.jsxs)("span",{className:"font-medium",children:[m.metragem,"m\xb2"]})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"Quartos"}),(0,t.jsx)("span",{className:"font-medium",children:m.quarto})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"Banheiros"}),(0,t.jsx)("span",{className:"font-medium",children:m.banheiro})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("span",{className:"block text-sm text-gray-500",children:"Vagas"}),(0,t.jsx)("span",{className:"font-medium",children:m.vaga})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"mb-2 text-lg font-medium text-gray-900",children:"Descri\xe7\xe3o"}),(0,t.jsx)("p",{className:"whitespace-pre-line text-gray-600",children:m.descricao})]}),(0,t.jsx)("button",{onClick:()=>{window.location.href="/contato"},className:"w-full rounded-lg bg-indigo-600 px-4 py-3 text-white transition-colors hover:bg-indigo-700",children:"Entrar em Contato"})]})]}):null]})})})})})]})})},m=s(2853);let h=async e=>{let a=await fetch(e);if(!a.ok)throw Error("Falha ao carregar im\xf3veis");return a.json()};function g(){let e=(0,n.useRouter)(),a=(0,n.usePathname)(),s=(0,n.useSearchParams)(),r=parseInt(s.get("page")||"1"),o=s.get("tipo")||"",c=s.get("imovel"),[g,x]=(0,l.useState)(r),[u,p]=(0,l.useState)(o),[v,j]=(0,l.useState)(c?parseInt(c):null),[b,f]=(0,l.useState)(""),{imoveis:N,pagination:y,isLoading:w,isError:k,mutate:C}=function(e,a){var s;let t=new URLSearchParams({page:e.toString(),...a&&{tipo:a}}),{data:l,error:r,isLoading:i,mutate:n}=(0,m.ZP)("/api/imoveis?".concat(t),h,{revalidateOnFocus:!1,revalidateOnReconnect:!0,refreshInterval:3e5,dedupingInterval:3e4});return{imoveis:null!==(s=null==l?void 0:l.items)&&void 0!==s?s:[],pagination:null==l?void 0:l.pagination,isLoading:i,isError:r,mutate:n}}(g,u),S=t=>{f(s.toString()),e.push("".concat(a,"?imovel=").concat(t)),j(t)},P=t=>{x(t);let l=new URLSearchParams(s.toString());l.set("page",t.toString()),e.push("".concat(a,"?").concat(l.toString()))},E=s=>{p(s),x(1);let t=new URLSearchParams;s&&t.set("tipo",s),t.set("page","1"),e.push("".concat(a,"?").concat(t.toString()))};return(0,l.useEffect)(()=>{c&&j(parseInt(c))},[c]),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"mb-8 text-3xl font-bold",children:"Im\xf3veis"}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>E(""),className:"px-4 py-2 rounded-md ".concat(""===u?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Todos"}),(0,t.jsx)("button",{onClick:()=>E("1"),className:"px-4 py-2 rounded-md ".concat("1"===u?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Aluguel"}),(0,t.jsx)("button",{onClick:()=>E("2"),className:"px-4 py-2 rounded-md ".concat("2"===u?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Venda"})]})}),k?(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erro ao carregar im\xf3veis"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,t.jsx)("p",{children:"Ocorreu um erro ao carregar a lista de im\xf3veis. Por favor, tente novamente mais tarde."})})]})})}):w?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-indigo-500"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:N.map(e=>(0,t.jsxs)("div",{className:"group cursor-pointer overflow-hidden rounded-lg bg-white shadow-lg transition-transform hover:scale-[1.02]",onClick:()=>S(e.idimovel),role:"button",tabIndex:0,children:[(0,t.jsx)("div",{className:"relative h-48",children:(0,t.jsx)(i(),{src:e.imagem?"https://adminmediaplus1.websiteseguro.com/projetos/telinveste/uploads/galeriaimovel_imagem/".concat(e.idimovel,"/").concat(e.imagem):"/images/placeholder-house.jpg",alt:e.titulo,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onError:e=>{e.target.src="/images/placeholder-house.jpg"}})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h2",{className:"mb-2 text-xl font-bold",children:e.titulo}),(0,t.jsxs)("p",{className:"mb-2 text-lg font-medium text-indigo-600",children:["R$ ",e.preco.toLocaleString("pt-BR"),2===e.transacao_idtransacao?"/m\xeas":""]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.endereco}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[e.metragem,"m\xb2"]}),(0,t.jsxs)("span",{children:[e.quarto," quartos"]}),(0,t.jsxs)("span",{children:[e.banheiro," banheiros"]}),(0,t.jsxs)("span",{children:[e.vaga," vagas"]})]})]})]},e.idimovel))}),(()=>{if(!y||y.totalPages<=1)return null;let e=[],a=Math.max(1,g-2),s=Math.min(y.totalPages,g+2);a>1&&(e.push(1),a>2&&e.push("..."));for(let t=a;t<=s;t++)e.push(t);return s<y.totalPages&&(s<y.totalPages-1&&e.push("..."),e.push(y.totalPages)),(0,t.jsxs)("div",{className:"mt-8 flex justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>P(g-1),disabled:1===g,className:"rounded-lg px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Anterior"}),e.map((e,a)=>(0,t.jsx)("button",{onClick:()=>"number"==typeof e&&P(e),disabled:"..."===e||e===g,className:"rounded-lg px-3 py-1 text-sm font-medium ".concat(e===g?"bg-indigo-600 text-white":"..."===e?"text-gray-700":"text-gray-700 hover:bg-gray-100"),children:e},a)),(0,t.jsx)("button",{onClick:()=>P(g+1),disabled:g===y.totalPages,className:"rounded-lg px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Pr\xf3xima"})]})})()]}),(0,t.jsx)(d,{isOpen:null!==v,onClose:()=>{b?e.push("".concat(a,"?").concat(b)):e.push(a),j(null)},propertyId:v})]})}}},function(e){e.O(0,[986,640,971,938,744],function(){return e(e.s=258)}),_N_E=e.O()}]);